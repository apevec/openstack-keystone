From 07321871794b217eefa6508279b69d5b0cac46fa Mon Sep 17 00:00:00 2001
From: Alan Pevec <apevec@redhat.com>
Date: Fri, 22 Jun 2012 20:01:48 +0200
Subject: [PATCH] fix sphinx warnings

also disable building old docs

Change-Id: I0bbbb2b702a12bd9acb79f89b5b5c92cffeec779
---
 doc/source/architecture.rst        | 4 ++++
 doc/source/conf.py                 | 2 +-
 doc/source/configuringservices.rst | 2 +-
 3 files changed, 6 insertions(+), 2 deletions(-)

diff --git a/doc/source/architecture.rst b/doc/source/architecture.rst
index cbd2f40..fd3cd78 100644
--- a/doc/source/architecture.rst
+++ b/doc/source/architecture.rst
@@ -84,18 +84,22 @@ which are thin wrapper classes which load the appropriate service driver based
 on the keystone configuration.
 
 * Identity
+
  * :mod:`keystone.identity.core.TenantController`
  * :mod:`keystone.identity.core.UserController`
  * :mod:`keystone.identity.core.RoleController`
 
 * Catalog
+
  * :mod:`keystone.catalog.core.ServiceController`
  * :mod:`keystone.service.VersionController`
 
 * Token
+
  * :mod:`keystone.service.TokenController`
 
 * Misc
+
  * :mod:`keystone.service.ExtensionsController`
 
 At this time, the policy service and associated manager is not exposed as a URL
diff --git a/doc/source/conf.py b/doc/source/conf.py
index 073e598..319faf0 100644
--- a/doc/source/conf.py
+++ b/doc/source/conf.py
@@ -79,7 +79,7 @@ release = '2012.1-dev'
 
 # List of patterns, relative to source directory, that match files and
 # directories to ignore when looking for source files.
-exclude_patterns = []
+exclude_patterns = ['old']
 
 # The reST default role (used for this markup: `text`) to use for all
 # documents.
diff --git a/doc/source/configuringservices.rst b/doc/source/configuringservices.rst
index 22a1590..e8f961a 100644
--- a/doc/source/configuringservices.rst
+++ b/doc/source/configuringservices.rst
@@ -21,7 +21,7 @@ Configuring Services to work with Keystone
 .. toctree::
    :maxdepth: 1
 
-    middleware_architecture
+   middleware_architecture
 
 Once Keystone is installed and running (see :doc:`configuration`), services
 need to be configured to work with it. To do this, we primarily install and
